
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cricket Fixtures (Next 7 Days)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    /* General Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Hide everything in body except .gms-wrapper */
    body > *:not(.gms-wrapper):not(.refresh-indicator) {
      display: none !important;
    }

    /* Inside .gms-wrapper hide everything except the table */
    .gms-wrapper > *:not(.gms-table-fixtures):not(table):not([class*="table"]):not([id*="table"]):not(.loading-overlay) {
      display: none !important;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f4f4f4;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
    }

    /* Refresh Indicator */
    .refresh-indicator {
      position: absolute;
      bottom: -40px;
      left: 0;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      font-weight: 400;
      color: #666;
      background-color: transparent;
      padding: 8px 15px;
      z-index: 1000;
      transition: color 0.3s ease;
    }

    .refresh-indicator.refreshing {
      color: #007bff;
    }

    /* Table Container */
    .gms-wrapper {
      width: 100%;
      max-width: 1000px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      overflow: visible;
      position: relative;
      margin-bottom: 50px;
      padding: 10px;
    }

    /* Table Styling */
    .gms-table-fixtures,
    table {
      width: 100%;
      border-collapse: collapse;
      text-align: left;
      font-weight: 400;
    }

    .gms-table-fixtures th,
    .gms-table-fixtures td,
    table th,
    table td {
      padding: 12px 15px;
      border-bottom: 1px solid #ddd;
    }

    /* Remove all row background except header */
    .gms-table-fixtures td,
    .gms-table-fixtures tr:nth-child(even),
    .gms-table-fixtures tr:hover,
    table td,
    table tr:nth-child(even),
    table tr:hover {
      background-color: transparent !important;
    }

    /* Header row */
    .gms-table-fixtures th,
    table th {
      background-color: black !important;
      color: white !important;
      font-weight: 400 !important;
    }

    .gms-table-fixtures td,
    table td {
      color: black !important;
      font-weight: 400 !important;
    }

    /* Hide Date and Venue Columns */
    .gms-table-fixtures th:nth-child(1),
    .gms-table-fixtures td:nth-child(1),
    .gms-table-fixtures th:nth-child(7),
    .gms-table-fixtures td:nth-child(7),
    table th:nth-child(1),
    table td:nth-child(1),
    table th:nth-child(7),
    table td:nth-child(7) {
      display: none;
    }

    /* VS column styling */
    .result-vs {
      color: #666 !important;
      text-align: center;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="refresh-indicator" id="refreshIndicator">
    Next refresh in <span id="countdown">15:00</span>
  </div>

  <div class="gms-wrapper">
    <table id="fixturesTable" class="gms-table-fixtures">
      <thead>
        <tr>
          <th>Date</th>
          <th>Home Team</th>
          <th>Home Club</th>
          <th></th>
          <th>Away Team</th>
          <th>Away Club</th>
          <th>Venue</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    fetch("http://play-cricket.com/api/v2/matches.json?&site_id=1786&season=2025&api_token=8786d7c44061b7d624367d32177420e0&from_entry_date=10/08/2025")
      .then(response => response.json())
      .then(data => {
        const tbody = document.querySelector("#fixturesTable tbody");
        const today = new Date();
        const nextWeek = new Date();
        nextWeek.setDate(today.getDate() + 7);

        if (data && data.matches && data.matches.length > 0) {
          const upcoming = data.matches.filter(match => {
            if (!match.start_date) return false;
            const matchDate = new Date(match.start_date);
            return matchDate >= today && matchDate <= nextWeek;
          });

          if (upcoming.length > 0) {
            upcoming.forEach(match => {
              const row = document.createElement("tr");
              row.innerHTML = `
                <td>${match.start_date || ""}</td>
                <td>${match.home_team_name || ""}</td>
                <td>${match.home_club_name || ""}</td>
                <td class="result-vs"><b>vs</b></td>
                <td>${match.away_team_name || ""}</td>
                <td>${match.away_club_name || ""}</td>
                <td>${match.ground_name || ""}</td>
              `;
              tbody.appendChild(row);
            });
          } else {
            const row = document.createElement("tr");
            row.innerHTML = `<td colspan="7" style="text-align:center;">No fixtures in the next 7 days</td>`;
            tbody.appendChild(row);
          }
        } else {
          const row = document.createElement("tr");
          row.innerHTML = `<td colspan="7" style="text-align:center;">No matches found</td>`;
          tbody.appendChild(row);
        }
      })
      .catch(error => {
        console.error("Error fetching data:", error);
        const tbody = document.querySelector("#fixturesTable tbody");
        const row = document.createElement("tr");
        row.innerHTML = `<td colspan="7" style="text-align:center; color:red;">Failed to load fixtures</td>`;
        tbody.appendChild(row);
      });

    // Refresh countdown
    let timeLeft = 15 * 60; 
    function updateCountdown() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      const formatted = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      document.getElementById('countdown').textContent = formatted;
      timeLeft--;
      if (timeLeft < 0) {
        timeLeft = 15 * 60;
      }
    }
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
