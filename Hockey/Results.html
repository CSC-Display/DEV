<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Club Fixtures & Results</title>
    <style>
        /* Sports Results Layout CSS - For GMS API Text Content */

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
            padding: 20px;
            line-height: 1.4;
        }

        /* Hide the raw text content and prepare for restructuring */
        .gms-wrapper {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            font-size: 0;
            color: transparent;
            overflow: hidden;
        }

        /* JavaScript will restructure the content, so provide base styles */
        .tournament-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 16px;
        }

        .tournament-header {
            background-color: #f1f8f1;
            color: #16a34a;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 12px 20px;
            border-bottom: 1px solid #e5e5e5;
            position: relative;
        }

        .tournament-date {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
            font-weight: 500;
            text-transform: none;
            letter-spacing: normal;
            font-size: 12px;
        }

        .match-row {
            display: flex;
            align-items: center;
            padding: 12px 20px 12px 56px;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
            min-height: 48px;
        }

        .match-row:last-child {
            border-bottom: none;
        }

        .match-row:hover {
            background-color: #f8f9fa;
        }

        .team-logo {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #16a34a;
            border: 2px solid #15803d;
        }

        .team-logo.alt-1 { background-color: #4a4a4a; border-color: #333; }
        .team-logo.alt-2 { background-color: #d2691e; border-color: #b8590b; }
        .team-logo.alt-3 { background-color: #1e3a8a; border-color: #1d4ed8; }

        .team-names {
            flex: 1;
            font-size: 14px;
            font-weight: 500;
            color: #333;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .match-score {
            background-color: #000;
            color: white;
            font-size: 16px;
            font-weight: bold;
            width: 32px;
            height: 32px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
        }

        .chevron {
            color: #ccc;
            font-size: 18px;
            opacity: 0.6;
        }

        .venue-link {
            font-size: 12px;
            color: #1d4ed8;
            text-decoration: none;
            padding: 4px 20px 8px 56px;
            display: block;
            text-transform: none;
            letter-spacing: normal;
        }

        .venue-link:hover {
            text-decoration: underline;
            background-color: #f8f9fa;
        }

        /* Responsive design */
        @media (max-width: 480px) {
            body { padding: 12px; }
            
            .tournament-section { 
                border-radius: 8px; 
                margin-bottom: 12px; 
            }
            
            .match-row { 
                padding: 10px 12px 10px 48px; 
                font-size: 13px; 
            }
            
            .team-logo { 
                left: 12px; 
                width: 20px; 
                height: 20px; 
            }
            
            .match-score { 
                width: 28px; 
                height: 28px; 
                font-size: 14px; 
            }
            
            .venue-link { 
                padding-left: 48px; 
                font-size: 11px; 
            }
        }

        /* Loading state */
        .gms-wrapper:empty::before {
            content: "Loading results...";
            display: block;
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
            font-style: italic;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="gms-wrapper gms-ajax" 
         data-method="api" 
         data-show="results" 
         data-club_id="e9ba26d3-7e18-4772-abb0-584e887c9d38" 
         data-whatson="7" 
         data-sort_by="fixtureTime" 
         data-options="showGender:yes,showList:yes"
         data-css="no">
    </div>
    
    <script src="https://gmsfeed.co.uk/js/api.js"></script>
    <script>
        // Text Parser for GMS API Content
        function parseGMSContent() {
            const wrapper = document.querySelector('.gms-wrapper');
            if (!wrapper || !wrapper.textContent) return;
            
            const rawText = wrapper.textContent.trim();
            const lines = rawText.split('\n').filter(line => line.trim());
            
            // Clear existing content
            wrapper.innerHTML = '';
            wrapper.style.fontSize = '14px';
            wrapper.style.color = '#333';
            
            // Group matches by date
            const matchGroups = {};
            let currentMatch = {};
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                // Date line (e.g., "20 SEP 2025")
                if (line.match(/^\d{1,2} [A-Z]{3} \d{4}$/)) {
                    if (currentMatch.date) {
                        // Save previous match
                        const date = currentMatch.date;
                        if (!matchGroups[date]) matchGroups[date] = [];
                        matchGroups[date].push(currentMatch);
                    }
                    currentMatch = { date: line };
                }
                // Team name (e.g., "CHELMSFORD 5 (F)")
                else if (line.match(/^[A-Z][A-Z\s\d()]+$/) && !line.includes(':')) {
                    if (currentMatch.team1) {
                        currentMatch.team2 = line;
                    } else {
                        currentMatch.team1 = line;
                    }
                }
                // Score (e.g., "2 : 1")
                else if (line.match(/^\d+ : \d+$/)) {
                    const [score1, score2] = line.split(' : ');
                    currentMatch.score1 = score1;
                    currentMatch.score2 = score2;
                }
                // Venue or other info
                else if (line.length > 0 && !line.match(/^\d+ : \d+$/)) {
                    if (!currentMatch.venue) {
                        currentMatch.venue = line;
                    }
                }
            }
            
            // Add the last match
            if (currentMatch.date) {
                const date = currentMatch.date;
                if (!matchGroups[date]) matchGroups[date] = [];
                matchGroups[date].push(currentMatch);
            }
            
            // Create HTML structure
            Object.keys(matchGroups).forEach(date => {
                const section = document.createElement('div');
                section.className = 'tournament-section';
                
                // Header
                const header = document.createElement('div');
                header.className = 'tournament-header';
                header.innerHTML = `
                    FIXTURES & RESULTS
                    <div class="tournament-date">${formatDate(date)}</div>
                `;
                section.appendChild(header);
                
                // Matches
                matchGroups[date].forEach((match, index) => {
                    if (match.team1 && match.team2 && match.score1 !== undefined) {
                        // Team 1 row
                        const row1 = createMatchRow(match.team1, match.score1, index * 2);
                        section.appendChild(row1);
                        
                        // Team 2 row
                        const row2 = createMatchRow(match.team2, match.score2, index * 2 + 1);
                        section.appendChild(row2);
                        
                        // Venue link if available
                        if (match.venue) {
                            const venueLink = document.createElement('a');
                            venueLink.className = 'venue-link';
                            venueLink.href = '#';
                            venueLink.textContent = match.venue;
                            section.appendChild(venueLink);
                        }
                    }
                });
                
                wrapper.appendChild(section);
            });
        }

        function createMatchRow(teamName, score, colorIndex) {
            const row = document.createElement('div');
            row.className = 'match-row';
            
            const logoColors = ['', 'alt-1', 'alt-2', 'alt-3'];
            const colorClass = logoColors[colorIndex % logoColors.length];
            
            row.innerHTML = `
                <div class="team-logo ${colorClass}"></div>
                <div class="team-names">${teamName}</div>
                <div class="match-score">${score}</div>
                <div class="chevron">›</div>
            `;
            
            return row;
        }

        function formatDate(dateStr) {
            const parts = dateStr.split(' ');
            const months = {
                'JAN': 'Jan', 'FEB': 'Feb', 'MAR': 'Mar', 'APR': 'Apr',
                'MAY': 'May', 'JUN': 'Jun', 'JUL': 'Jul', 'AUG': 'Aug',
                'SEP': 'Sep', 'OCT': 'Oct', 'NOV': 'Nov', 'DEC': 'Dec'
            };
            return `${parts[0]} ${months[parts[1]] || parts[1]}`;
        }

        // Wait for the API to load content, then parse it
        function waitAndParse() {
            const wrapper = document.querySelector('.gms-wrapper');
            if (wrapper && wrapper.textContent && wrapper.textContent.trim()) {
                parseGMSContent();
            } else {
                setTimeout(waitAndParse, 500);
            }
        }

        // Start checking after a short delay
        setTimeout(waitAndParse, 1000);
    </script>
</body>
</html>
