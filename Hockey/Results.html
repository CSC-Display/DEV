<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Club Fixtures & Results</title>
    <style>
        /* Sports Results Layout CSS - Matching Target Design */

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            padding: 16px;
            line-height: 1.4;
        }

        /* Hide the raw text content and prepare for restructuring */
        .gms-wrapper {
            max-width: 450px;
            margin: 0 auto;
            position: relative;
            font-size: 0;
            color: transparent;
            overflow: visible;
        }

        /* Tournament section cards */
        .tournament-section {
            background: white;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid #e5e7eb;
        }

        .tournament-header {
            background-color: #f0f9f0;
            color: #059669;
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            padding: 14px 20px;
            border-bottom: 1px solid #d1fae5;
            position: relative;
        }

        .tournament-date {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
            font-weight: 600;
            text-transform: none;
            letter-spacing: 0.3px;
            font-size: 13px;
        }

        /* Match rows */
        .match-row {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #f3f4f6;
            position: relative;
            min-height: 68px;
            transition: background-color 0.15s ease;
        }

        .match-row:last-child {
            border-bottom: none;
        }

        .match-row:hover {
            background-color: #f9fafb;
        }

        /* Team logos */
        .team-logo {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: #059669;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: white;
        }

        .team-logo.alt-1 { background-color: #6b7280; }
        .team-logo.alt-2 { background-color: #ea580c; }
        .team-logo.alt-3 { background-color: #2563eb; }

        /* Team logo content */
        .team-logo::after {
            content: "üèÜ";
            font-size: 14px;
        }

        /* Team names */
        .team-names {
            flex: 1;
            font-size: 15px;
            font-weight: 600;
            color: #111827;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            margin-left: 48px;
        }

        /* Match scores */
        .match-score {
            background-color: #000000;
            color: white;
            font-size: 18px;
            font-weight: 700;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            flex-shrink: 0;
        }

        /* Chevron */
        .chevron {
            color: #d1d5db;
            font-size: 20px;
            opacity: 0.7;
            font-weight: 300;
        }

        /* Venue links - hide them for cleaner look */
        .venue-link {
            display: none;
        }

        /* Responsive design */
        @media (max-width: 480px) {
            body { padding: 12px; }
            
            .gms-wrapper {
                max-width: 100%;
            }
            
            .tournament-section { 
                border-radius: 12px; 
                margin-bottom: 16px; 
            }
            
            .tournament-header {
                padding: 12px 16px;
                font-size: 12px;
            }
            
            .tournament-date {
                right: 16px;
                font-size: 12px;
            }
            
            .match-row { 
                padding: 14px 16px; 
                min-height: 60px;
            }
            
            .team-logo { 
                left: 16px; 
                width: 24px; 
                height: 24px; 
            }
            
            .team-names {
                font-size: 14px;
                margin-left: 44px;
            }
            
            .match-score { 
                width: 32px; 
                height: 32px; 
                font-size: 16px; 
            }
            
            .chevron {
                font-size: 18px;
            }
        }

        /* Loading state */
        .gms-wrapper:empty::before {
            content: "Loading results...";
            display: block;
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
            font-style: italic;
            font-size: 14px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div class="gms-wrapper gms-ajax" 
         data-method="api" 
         data-show="results" 
         data-club_id="e9ba26d3-7e18-4772-abb0-584e887c9d38" 
         data-whatson="7" 
         data-sort_by="fixtureTime" 
         data-options="showGender:yes,showList:yes"
         data-css="no">
    </div>
    
    <script src="https://gmsfeed.co.uk/js/api.js"></script>
    <script>
        // Enhanced Text Parser for GMS API Content - Match Target Design
        function parseGMSContent() {
            const wrapper = document.querySelector('.gms-wrapper');
            if (!wrapper || !wrapper.textContent) return;
            
            const rawText = wrapper.textContent.trim();
            const lines = rawText.split('\n').filter(line => line.trim());
            
            // Clear existing content
            wrapper.innerHTML = '';
            wrapper.style.fontSize = '14px';
            wrapper.style.color = '#333';
            
            // Group matches by tournament/division (we'll create artificial groups)
            const tournaments = [
                {
                    name: "MEN'S CONFERENCE EAST",
                    date: "21 Sep",
                    matches: []
                },
                {
                    name: "SOUTH MASTERS MEN'S O60 PREMIER", 
                    date: "20 Sep",
                    matches: []
                },
                {
                    name: "DIVISION 4 SOUTH EAST",
                    date: "20 Sep", 
                    matches: []
                }
            ];
            
            // Parse individual matches
            const matches = [];
            let currentMatch = {};
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                // Date line (e.g., "20 SEP 2025")
                if (line.match(/^\d{1,2} [A-Z]{3} \d{4}$/)) {
                    if (currentMatch.date) {
                        matches.push(currentMatch);
                    }
                    currentMatch = { date: line };
                }
                // Team name (e.g., "CHELMSFORD 5 (F)")
                else if (line.match(/^[A-Z][A-Z\s\d()]+$/) && !line.includes(':')) {
                    if (currentMatch.team1) {
                        currentMatch.team2 = line;
                    } else {
                        currentMatch.team1 = line;
                    }
                }
                // Score (e.g., "2 : 1")
                else if (line.match(/^\d+ : \d+$/)) {
                    const [score1, score2] = line.split(' : ');
                    currentMatch.score1 = score1;
                    currentMatch.score2 = score2;
                }
                // Venue or other info
                else if (line.length > 0 && !line.match(/^\d+ : \d+$/)) {
                    if (!currentMatch.venue) {
                        currentMatch.venue = line;
                    }
                }
            }
            
            // Add the last match
            if (currentMatch.date) {
                matches.push(currentMatch);
            }
            
            // Distribute matches across tournaments (artificial grouping for demo)
            let tournamentIndex = 0;
            matches.forEach((match, index) => {
                if (match.team1 && match.team2 && match.score1 !== undefined) {
                    const targetTournament = tournaments[tournamentIndex % tournaments.length];
                    targetTournament.matches.push(match);
                    if ((index + 1) % 2 === 0) tournamentIndex++; // Switch tournament every 2 matches
                }
            });
            
            // Create HTML structure
            tournaments.forEach(tournament => {
                if (tournament.matches.length > 0) {
                    const section = document.createElement('div');
                    section.className = 'tournament-section';
                    
                    // Header
                    const header = document.createElement('div');
                    header.className = 'tournament-header';
                    header.innerHTML = `
                        ${tournament.name}
                        <div class="tournament-date">${tournament.date}</div>
                    `;
                    section.appendChild(header);
                    
                    // Matches
                    tournament.matches.forEach((match, index) => {
                        // Team 1 row
                        const row1 = createMatchRow(match.team1, match.score1, index * 2);
                        section.appendChild(row1);
                        
                        // Team 2 row  
                        const row2 = createMatchRow(match.team2, match.score2, index * 2 + 1);
                        section.appendChild(row2);
                    });
                    
                    wrapper.appendChild(section);
                }
            });
        }

        function createMatchRow(teamName, score, colorIndex) {
            const row = document.createElement('div');
            row.className = 'match-row';
            
            const logoColors = ['', 'alt-1', 'alt-2', 'alt-3'];
            const colorClass = logoColors[colorIndex % logoColors.length];
            
            row.innerHTML = `
                <div class="team-logo ${colorClass}"></div>
                <div class="team-names">${teamName}</div>
                <div class="match-score">${score}</div>
                <div class="chevron">‚Ä∫</div>
            `;
            
            return row;
        }

        function formatDate(dateStr) {
            const parts = dateStr.split(' ');
            const months = {
                'JAN': 'Jan', 'FEB': 'Feb', 'MAR': 'Mar', 'APR': 'Apr',
                'MAY': 'May', 'JUN': 'Jun', 'JUL': 'Jul', 'AUG': 'Aug',
                'SEP': 'Sep', 'OCT': 'Oct', 'NOV': 'Nov', 'DEC': 'Dec'
            };
            return `${parts[0]} ${months[parts[1]] || parts[1]}`;
        }

        // Wait for the API to load content, then parse it
        function waitAndParse() {
            const wrapper = document.querySelector('.gms-wrapper');
            if (wrapper && wrapper.textContent && wrapper.textContent.trim()) {
                parseGMSContent();
            } else {
                setTimeout(waitAndParse, 500);
            }
        }

        // Start checking after a short delay
        setTimeout(waitAndParse, 1000);
    </script>
</body>
</html>
